{"version":3,"file":"preoccupyjs.umd.js","sources":["../src/actions/base.ts","../src/actions/MoveToAction.ts","../src/actions/ClickToAction.ts","../src/actions/KeypressAction.ts","../src/actions/ScrollByAction.ts","../src/actions/DblClickToAction.ts","../src/actions/KeydownAction.ts","../src/actions/KeyupAction.ts","../src/actions/index.ts","../src/transports/abstract.ts","../src/transports/local.ts","../src/client.ts","../src/dom.ts","../src/host.ts","../src/preoccupyjs.ts"],"sourcesContent":["import { DomController } from '../dom';\nimport { Host } from '../host';\nexport enum ActionsName {\n    BASE = '[Action] Base',\n    MOVE_TO = '[Action] Move To',\n    CLICK_TO = '[Action] Click To',\n    DBL_CLICK_TO = '[Action] Double Click To',\n    KEYPRESS = '[Action] Keypress',\n    KEYDOWN = '[Action] Keydown',\n    KEYUP = '[Action] Keyup',\n    SCROLL_BY = '[Action] Scroll By'\n}\nexport interface RawPreoccupyAction {\n    type: string;\n    payload?: object;\n}\nexport interface PreoccupyAction {\n    payload?: object;\n    performEvent(dom: DomController, stack: PreoccupyAction[]): void;\n}\nexport abstract class BaseAction implements PreoccupyAction {\n    public type: string;\n    static type: string = ActionsName.BASE;\n    abstract performEvent(dom: DomController, stack: PreoccupyAction[]): void;\n    static handleEvent(host: Host, event: Event): PreoccupyAction {\n        console.warn(`You have to implement a static method handleEvent for ${this.type} action`);\n        return  <PreoccupyAction>{};\n    };\n\n    constructor(public payload: object = {}) {\n        this.type = BaseAction.type;\n    }\n}\n","import { PreoccupyAction, ActionsName, BaseAction }  from './base';\nimport { DomController } from '../dom';\nimport { Host } from '../host';\nexport class MoveToAction extends BaseAction implements PreoccupyAction {\n    static type: string = ActionsName.MOVE_TO;\n    static eventName: string = 'mousemove';\n    constructor(public payload: {\n        x: number;\n        y: number;\n    }) {\n        super();\n        this.type = MoveToAction.type;\n    }\n\n    performEvent(dom: DomController, stack: PreoccupyAction[]) {\n        dom.moveCursorTo(this.payload);\n    }\n\n    static handleEvent(host: Host, event: Event): PreoccupyAction {\n        const payload = host.getRelativeCoordinate(event as MouseEvent);\n        return new MoveToAction(payload);\n    }\n}\n","import { PreoccupyAction, ActionsName, BaseAction } from './base';\nimport { DomController } from '../dom';\nimport { Host } from '../host';\nexport class ClickToAction extends BaseAction implements PreoccupyAction {\n    static type: string = ActionsName.CLICK_TO;\n    static eventName: string = 'click';\n    constructor(public payload: {\n        x: number;\n        y: number;\n    }) {\n        super();\n        this.type = ClickToAction.type;\n    }\n\n    performEvent(dom: DomController, stack: PreoccupyAction[]) {\n        dom.clickTo(this.payload);\n    }\n\n    static handleEvent(host: Host, event: Event): PreoccupyAction {\n        const payload = host.getRelativeCoordinate(event as MouseEvent);\n        return new ClickToAction(payload);\n    }\n}\n","import { PreoccupyAction, ActionsName, BaseAction }  from './base';\nimport { DomController } from '../dom';\nimport { Host } from '../host';\nexport class KeypressAction extends BaseAction implements PreoccupyAction {\n    static type: string = ActionsName.KEYPRESS;\n    static eventName: string = 'keypress';\n    constructor(public payload: {\n        which: number;\n    }) {\n        super();\n        this.type = KeypressAction.type;\n    }\n\n    performEvent(dom: DomController, stack: PreoccupyAction[]) {\n        dom.keypress(this.payload);\n    }\n\n    static handleEvent(host: Host, event: KeyboardEvent): PreoccupyAction {\n        return new KeypressAction({\n            which: event.which\n        });\n    }\n}\n","import { PreoccupyAction, ActionsName, BaseAction }  from './base';\nimport { DomController } from '../dom';\nimport { Host } from '../host';\nexport class ScrollByAction extends BaseAction implements PreoccupyAction {\n    static type: string = ActionsName.SCROLL_BY;\n    static eventName: string = 'mousewheel';\n    constructor(public payload: {\n        x: number;\n        y: number;\n        deltaX: number;\n        deltaY: number;\n    }) {\n        super();\n        this.type = ScrollByAction.type;\n    }\n\n    performEvent(dom: DomController, stack: PreoccupyAction[]) {\n        dom.scroll(this.payload);\n    }\n\n    static handleEvent(host: Host, event: WheelEvent): PreoccupyAction {\n        const coordinates = host.getRelativeCoordinate(<MouseEvent>event);\n\n        return new ScrollByAction({\n            ...coordinates,\n            deltaX: event.deltaX,\n            deltaY: event.deltaY\n        });\n    }\n}\n","import { PreoccupyAction, ActionsName, BaseAction }  from './base';\nimport { DomController } from '../dom';\nimport { Host } from '../host';\nexport class DblClickToAction extends BaseAction implements PreoccupyAction {\n    static type: string = ActionsName.DBL_CLICK_TO;\n    static eventName: string = 'dblclick';\n    constructor(public payload: {\n        x: number;\n        y: number;\n    }) {\n        super();\n        this.type = DblClickToAction.type;\n    }\n\n    performEvent(dom: DomController, stack: PreoccupyAction[]) {\n        dom.dblClickTo(this.payload);\n    }\n\n    static handleEvent(host: Host, event: Event): PreoccupyAction {\n        const payload = host.getRelativeCoordinate(event as MouseEvent);\n        return new DblClickToAction(payload);\n    }\n}\n","import { PreoccupyAction, ActionsName, BaseAction }  from './base';\nimport { DomController } from '../dom';\nimport { Host } from '../host';\nexport class KeydownAction extends BaseAction implements PreoccupyAction {\n    static type: string = ActionsName.KEYDOWN;\n    static eventName: string = 'keydown';\n    constructor(public payload: {\n        which: number;\n    }) {\n        super();\n        this.type = KeydownAction.type;\n    }\n\n    performEvent(dom: DomController, stack: PreoccupyAction[]) {\n        // TBI\n    }\n\n    static handleEvent(host: Host, event: KeyboardEvent): PreoccupyAction {\n        return new KeydownAction({\n            which: event.which\n        });\n    }\n}\n","import { PreoccupyAction, ActionsName, BaseAction }  from './base';\nimport { DomController } from '../dom';\nimport { Host } from '../host';\nexport class KeyupAction extends BaseAction implements PreoccupyAction {\n    static type: string = ActionsName.KEYUP;\n    static eventName: string = 'keyup';\n    constructor(public payload: {\n        which: number;\n    }) {\n        super();\n        this.type = KeyupAction.type;\n    }\n\n    performEvent(dom: DomController, stack: PreoccupyAction[]) {\n        // dom.k\n    }\n\n    static handleEvent(host: Host, event: KeyboardEvent): PreoccupyAction {\n        return new KeyupAction({\n            which: event.which\n        });\n    }\n}\n","import { MoveToAction } from \"./MoveToAction\";\nimport { ClickToAction } from \"./ClickToAction\";\nimport { KeypressAction } from \"./KeypressAction\";\nimport { ScrollByAction } from \"./ScrollByAction\";\nimport { DblClickToAction } from \"./DblClickToAction\";\nimport { KeydownAction } from './KeydownAction';\nimport { KeyupAction } from './KeyupAction';\n\nexport const actionMap = new Map<string, any>([\n    [MoveToAction.type, MoveToAction],\n    [ClickToAction.type, ClickToAction],\n    [KeydownAction.type, KeydownAction],\n    [KeypressAction.type, KeypressAction],\n    [KeyupAction.type, KeyupAction],\n    [MoveToAction.type, MoveToAction],\n    [ScrollByAction.type, ScrollByAction],\n    [DblClickToAction.type, DblClickToAction]\n]);\n","import { PreoccupyAction } from './../actions/base';\nexport enum TransportEvents {\n    connect,\n    disconnect,\n    action\n}\n\nexport type Listener = (event: TransportEvent) => void;\n\nexport interface TransportEvent {\n    type: TransportEvents;\n    detail: any;\n}\n\nexport interface AbstractTransport {\n    on(type: TransportEvents, callback: Listener): void;\n    publish(action: PreoccupyAction): void;\n}\n\nexport class Message {\n    public hash: string;\n\n    constructor(public type: string, public data: object, hash?: string) {\n        this.hash = hash || Math.random() * 10e6 + '';\n    }\n\n    public serialize(): string {\n        return JSON.stringify(this.data);\n    }\n\n    static parse(src: string): Message {\n        const [_prefix, type, hash, dataSrc] =  src.split('|');\n        return new Message(type, JSON.parse(dataSrc), hash);\n    }\n};","import { AbstractTransport, TransportEvents, TransportEvent, Listener, Message } from './abstract';\nimport { PreoccupyAction } from './../actions/base';\n\nexport class LocalTransport implements AbstractTransport {\n\n    private connected: boolean = false;\n    private listeners: { [prop: string]: Listener[] } = {};\n    private publishedMessages: Message[] = [];\n    private storage: Storage = localStorage;\n\n    constructor(private preifx: string = 'prefix', private stackSize: number = 10) {}\n\n    public handshake() {\n        if (this.connected) {\n            this.trigger(TransportEvents.connect);\n        } else {\n            this.connect();\n        }\n    }\n\n    public on(eventName: TransportEvents, callback: Listener): void {\n        if (!this.listeners[eventName]) {\n            this.listeners[eventName] = [];\n        }\n        this.listeners[eventName].push(callback);\n    };\n\n    public publish(action: PreoccupyAction): void {\n        const message = new Message('action', action);\n\n        this.publishedMessages.push(message);\n        this.storage.setItem(`${this.preifx}|${message.type}|${message.hash}`, message.serialize());\n\n        if (this.publishedMessages.length > this.stackSize) {\n            const messageToDelete = this.publishedMessages.shift();\n            if (messageToDelete != null) {\n                this.storage.removeItem(`${this.preifx}|${messageToDelete.type}|${messageToDelete.hash}`);\n            }\n        }\n    };\n\n    private connect() {\n        window.addEventListener('storage', (event) => this.onStorageMessage(event));\n        this.connected = true;\n        this.trigger(TransportEvents.connect);\n    }\n\n    private onStorageMessage({key, newValue}: StorageEvent) {\n        if (key && newValue && key.startsWith(this.preifx)) {\n            const message = Message.parse(key + '|' + newValue);\n\n            if (this.isExternalMessage(message)) {\n                this.trigger(TransportEvents.action, message);\n            }\n        }\n    }\n\n    private trigger(type: TransportEvents, detail?: any) {\n        if (Array.isArray(this.listeners[type])) {\n            this.listeners[type].forEach((callback) => callback({\n                type,\n                detail\n            }));\n        };\n    }\n\n    private isExternalMessage(message: Message): boolean {\n        return this.publishedMessages.find((ownMessage) => ownMessage.hash === message.hash) == null;\n    }\n}\n","import { actionMap } from './actions';\nimport { PreoccupyAction, RawPreoccupyAction } from './actions/base';\nimport { DomController } from './dom';\nimport { AbstractTransport, Message, TransportEvents } from './transports';\n\nconst STACK_LENGTH = 30;\n\nexport class Client {\n    private actionStack: PreoccupyAction[] = [];\n    private actions: Map<string, any> = actionMap;\n    constructor(\n        transport: AbstractTransport,\n        private dom: DomController\n    ) {\n        transport.on(TransportEvents.connect, (event) => {\n            this.dom.init();\n        });\n\n        transport.on(TransportEvents.action, (event) => {\n            const message: Message = event.detail;\n\n            this.perform(message.data as RawPreoccupyAction);\n        });\n    }\n\n    public perform(rawAction: RawPreoccupyAction) {\n        if (this.actions.has(rawAction.type)) {\n            const Action = this.actions.get(rawAction.type);\n            const action = new Action(rawAction.payload) as PreoccupyAction;\n\n            action.performEvent(this.dom, this.actionStack);\n            this.actionStack.push(action);\n            while (this.actionStack.length > STACK_LENGTH) {\n                this.actionStack.shift();\n            }\n        }\n    }\n\n}","import { Coordinates } from \"./host\";\n\nconst CURSOR = 1;\n\nexport class DomController {\n\n    private cursorEl: HTMLElement = document.createElement('div');\n\n    constructor(private el: Element) {}\n\n    public init() {\n        this.createCursorEl();\n        this.moveCursorTo({x: 0, y: 0});\n    }\n\n    public moveCursorTo(coordinates: Coordinates) {\n        const { x, y } = this.getAbsoluteCoordinates(coordinates);\n        this.cursorEl.style.top = `${y}px`;\n        this.cursorEl.style.left = `${x}px`;\n    }\n\n    public clickTo(coordinates: Coordinates) {\n        const absCoordinates = this.getAbsoluteCoordinates(coordinates);\n        const el = <HTMLElement>this.getElementFromPoint(absCoordinates);\n\n        switch (el.tagName.toLowerCase()) {\n            case 'textarea':\n            case 'input':\n                this.setFocus(<HTMLTextAreaElement>el);\n            default:\n                const options = {\n                    clientX: absCoordinates.x,\n                    clientY: absCoordinates.y,\n                    view: window\n                };\n                this.fireEvent('mousedown', el, options);\n                this.fireEvent('mouseup', el, options);\n                this.fireEvent('click', el, options);\n                break;\n        }\n\n    }\n\n    public dblClickTo(coordinates: Coordinates) {\n        const el = <HTMLElement>this.getElementFromPoint(this.getAbsoluteCoordinates(coordinates));\n        this.fireEvent('dblclick', el);\n    }\n\n    public keypress({which}: {which: number}) {\n        const el = document.activeElement;\n        if (el == null) {\n            return;\n        }\n\n        switch (el.tagName.toLowerCase()) {\n            case 'textarea':\n            case 'input':\n                this.fireEvent('keydown', <HTMLTextAreaElement>el);\n                this.fireEvent('keypress', <HTMLTextAreaElement>el);\n                (<HTMLTextAreaElement>el).value += String.fromCharCode(which);\n                this.fireEvent('input', <HTMLTextAreaElement>el);\n                this.fireEvent('keyup', <HTMLTextAreaElement>el);\n            default:\n                break;\n        }\n    }\n\n    public scroll({x, y, deltaX, deltaY}: {x: number, y: number, deltaX: number, deltaY: number}) {\n        let initialEl = <HTMLElement>this.getElementFromPoint(this.getAbsoluteCoordinates({x, y}));\n        let scrollableEl: HTMLElement | undefined;\n        let el = initialEl;\n\n        while(el.parentElement) {\n            if (this.isScrollable(el)) {\n                scrollableEl = el;\n                break;\n            }\n\n            el = el.parentElement;\n        }\n\n        if (scrollableEl) {\n            scrollableEl.scrollBy({\n                left: deltaX,\n                top: deltaY\n            });\n        }\n\n        this.fireEvent('wheel', el);\n        this.fireEvent('scroll', el);\n    }\n\n    private getAbsoluteCoordinates({x, y}: Coordinates): Coordinates {\n        const { clientHeight, clientWidth } = this.el as HTMLBodyElement;\n\n        return {\n            x: x * clientWidth,\n            y: y * clientHeight\n        };\n    }\n\n    private css(el: HTMLElement, styles: Partial<CSSStyleDeclaration>) {\n        for (const [prop, value] of Object.entries(styles)) {\n            el.style.setProperty(prop, value);\n        }\n    }\n\n    private getElementFromPoint({x, y}: Coordinates) {\n        return document.elementFromPoint(x - CURSOR, y - CURSOR);\n    }\n\n    private setFocus(el: HTMLTextAreaElement | HTMLInputElement) {\n        el.focus();\n        el.select();\n    }\n\n    private fireEvent(type: string, el: HTMLElement, options: object = {}): boolean {\n        let event: Event;\n\n        switch (type) {\n            case 'click':\n            case 'dblclick':\n            case 'mousedown':\n            case 'mouseup':\n                event = new MouseEvent(type, {\n                    bubbles: true,\n                    cancelable: true,\n                    ...options\n                });\n                break;\n            default:\n                event = new Event(type, {\n                    bubbles: true,\n                    cancelable: true\n                });\n                break;\n        }\n\n        console.log('emited', event);\n        return el.dispatchEvent(event);\n    }\n\n    private isScrollable(el: HTMLElement) {\n        return el.scrollWidth > el.clientWidth || el.scrollHeight > el.clientHeight;\n    }\n\n    private createCursorEl() {\n        this.css(this.cursorEl, <Partial<CSSStyleDeclaration>>{\n            'z-index': '100500',\n            'position': 'absolute',\n            'width': '30px',\n            'height': '30px',\n            'display': 'inline-block',\n            'background': `url('data:image/png;base64,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')`,\n        });\n\n        const bodyEl = this.el.querySelector('body');\n        if (bodyEl) {\n            bodyEl.appendChild(this.cursorEl);\n        } else {\n            this.el.appendChild(this.cursorEl);\n        }\n    }\n\n}","import { AbstractTransport, TransportEvents } from './transports';\nimport { DblClickToAction } from \"./actions/DblClickToAction\";\nimport { ScrollByAction } from \"./actions/ScrollByAction\";\nimport { KeypressAction } from \"./actions/KeypressAction\";\nimport { ClickToAction } from \"./actions/ClickToAction\";\nimport { MoveToAction } from \"./actions/MoveToAction\";\nimport { actionMap } from './actions';\nimport { PreoccupyAction } from './actions/base';\n\nexport interface Coordinates {\n    x: number;\n    y: number;\n}\n\nexport class Host {\n    private actions: Map<string, any> = actionMap;\n    constructor(private transport: AbstractTransport, private el: HTMLElement) {\n        transport.on(TransportEvents.connect, (event) => {\n            console.log('HOST', event);\n            this.initEvents();\n        });\n    }\n\n    private initEvents() {\n        this.actions.forEach((Action) => {\n            this.el.addEventListener(Action.eventName, (event: Event) => {\n                const action = Action.handleEvent(this, event);\n                this.transport.publish(action);\n            });\n        });\n    }\n\n    public getRelativeCoordinate(event: MouseEvent): {x: number, y: number} {\n        const { offsetX, offsetY } = event;\n        const { clientHeight, clientWidth } = <HTMLDivElement>event.target;\n\n        return {\n            x: offsetX / clientWidth,\n            y: offsetY / clientHeight\n        };\n    }\n}\n","import { Client } from './client';\nimport { LocalTransport } from './transports/local';\nimport { DomController } from './dom';\nimport { Host } from './host';\n\nexport * from './client';\nexport * from './host';\n\nconst transport = new LocalTransport();\n\nexport function start(el: HTMLElement): Client {\n  const client = new Client(transport, new DomController(el));\n  transport.handshake();\n  return client;\n\n}\n\nexport function connect(el: HTMLElement): Host {\n  const host = new Host(transport, el);\n  transport.handshake();\n  return host;\n}"],"names":["tslib_1.__extends"],"mappings":"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"}