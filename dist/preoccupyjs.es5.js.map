{"version":3,"file":"preoccupyjs.es5.js","sources":["../src/actions/base.ts","../src/actions/MoveToAction.ts","../src/actions/ClickToAction.ts","../src/actions/KeypressAction.ts","../src/actions/ScrollByAction.ts","../src/actions/DblClickToAction.ts","../src/actions/KeydownAction.ts","../src/actions/KeyupAction.ts","../src/actions/index.ts","../src/transports/abstract.ts","../src/transports/local.ts","../src/client.ts","../src/dom.ts","../src/host.ts","../src/preoccupyjs.ts"],"sourcesContent":["import { DomController } from '../dom';\nimport { Host } from '../host';\nexport enum ActionsName {\n    BASE = '[Action] Base',\n    MOVE_TO = '[Action] Move To',\n    CLICK_TO = '[Action] Click To',\n    DBL_CLICK_TO = '[Action] Double Click To',\n    KEYPRESS = '[Action] Keypress',\n    KEYDOWN = '[Action] Keydown',\n    KEYUP = '[Action] Keyup',\n    SCROLL_BY = '[Action] Scroll By'\n}\nexport interface RawPreoccupyAction {\n    type: string;\n    payload?: object;\n}\nexport interface PreoccupyAction {\n    payload?: object;\n    performEvent(dom: DomController, stack: PreoccupyAction[]): void;\n}\nexport abstract class BaseAction implements PreoccupyAction {\n    public type: string;\n    static type: string = ActionsName.BASE;\n    abstract performEvent(dom: DomController, stack: PreoccupyAction[]): void;\n    static handleEvent(host: Host, event: Event): PreoccupyAction {\n        console.warn(`You have to implement a static method handleEvent for ${this.type} action`);\n        return  <PreoccupyAction>{};\n    };\n\n    constructor(public payload: object = {}) {\n        this.type = BaseAction.type;\n    }\n}\n","import { PreoccupyAction, ActionsName, BaseAction }  from './base';\nimport { DomController } from '../dom';\nimport { Host } from '../host';\nexport class MoveToAction extends BaseAction implements PreoccupyAction {\n    static type: string = ActionsName.MOVE_TO;\n    static eventName: string = 'mousemove';\n    constructor(public payload: {\n        x: number;\n        y: number;\n    }) {\n        super();\n        this.type = MoveToAction.type;\n    }\n\n    performEvent(dom: DomController, stack: PreoccupyAction[]) {\n        dom.moveCursorTo(this.payload);\n    }\n\n    static handleEvent(host: Host, event: Event): PreoccupyAction {\n        const payload = host.getRelativeCoordinate(event as MouseEvent);\n        return new MoveToAction(payload);\n    }\n}\n","import { PreoccupyAction, ActionsName, BaseAction } from './base';\nimport { DomController } from '../dom';\nimport { Host } from '../host';\nexport class ClickToAction extends BaseAction implements PreoccupyAction {\n    static type: string = ActionsName.CLICK_TO;\n    static eventName: string = 'click';\n    constructor(public payload: {\n        x: number;\n        y: number;\n    }) {\n        super();\n        this.type = ClickToAction.type;\n    }\n\n    performEvent(dom: DomController, stack: PreoccupyAction[]) {\n        dom.clickTo(this.payload);\n    }\n\n    static handleEvent(host: Host, event: Event): PreoccupyAction {\n        const payload = host.getRelativeCoordinate(event as MouseEvent);\n        return new ClickToAction(payload);\n    }\n}\n","import { PreoccupyAction, ActionsName, BaseAction }  from './base';\nimport { DomController } from '../dom';\nimport { Host } from '../host';\nexport class KeypressAction extends BaseAction implements PreoccupyAction {\n    static type: string = ActionsName.KEYPRESS;\n    static eventName: string = 'keypress';\n    constructor(public payload: {\n        which: number;\n    }) {\n        super();\n        this.type = KeypressAction.type;\n    }\n\n    performEvent(dom: DomController, stack: PreoccupyAction[]) {\n        dom.keypress(this.payload);\n    }\n\n    static handleEvent(host: Host, event: KeyboardEvent): PreoccupyAction {\n        return new KeypressAction({\n            which: event.which\n        });\n    }\n}\n","import { PreoccupyAction, ActionsName, BaseAction }  from './base';\nimport { DomController } from '../dom';\nimport { Host } from '../host';\nexport class ScrollByAction extends BaseAction implements PreoccupyAction {\n    static type: string = ActionsName.SCROLL_BY;\n    static eventName: string = 'mousewheel';\n    constructor(public payload: {\n        x: number;\n        y: number;\n        deltaX: number;\n        deltaY: number;\n    }) {\n        super();\n        this.type = ScrollByAction.type;\n    }\n\n    performEvent(dom: DomController, stack: PreoccupyAction[]) {\n        dom.scroll(this.payload);\n    }\n\n    static handleEvent(host: Host, event: WheelEvent): PreoccupyAction {\n        const coordinates = host.getRelativeCoordinate(<MouseEvent>event);\n\n        return new ScrollByAction({\n            ...coordinates,\n            deltaX: event.deltaX,\n            deltaY: event.deltaY\n        });\n    }\n}\n","import { PreoccupyAction, ActionsName, BaseAction }  from './base';\nimport { DomController } from '../dom';\nimport { Host } from '../host';\nexport class DblClickToAction extends BaseAction implements PreoccupyAction {\n    static type: string = ActionsName.DBL_CLICK_TO;\n    static eventName: string = 'dblclick';\n    constructor(public payload: {\n        x: number;\n        y: number;\n    }) {\n        super();\n        this.type = DblClickToAction.type;\n    }\n\n    performEvent(dom: DomController, stack: PreoccupyAction[]) {\n        dom.dblClickTo(this.payload);\n    }\n\n    static handleEvent(host: Host, event: Event): PreoccupyAction {\n        const payload = host.getRelativeCoordinate(event as MouseEvent);\n        return new DblClickToAction(payload);\n    }\n}\n","import { PreoccupyAction, ActionsName, BaseAction }  from './base';\nimport { DomController } from '../dom';\nimport { Host } from '../host';\nexport class KeydownAction extends BaseAction implements PreoccupyAction {\n    static type: string = ActionsName.KEYDOWN;\n    static eventName: string = 'keydown';\n    constructor(public payload: {\n        which: number;\n    }) {\n        super();\n        this.type = KeydownAction.type;\n    }\n\n    performEvent(dom: DomController, stack: PreoccupyAction[]) {\n        // TBI\n    }\n\n    static handleEvent(host: Host, event: KeyboardEvent): PreoccupyAction {\n        return new KeydownAction({\n            which: event.which\n        });\n    }\n}\n","import { PreoccupyAction, ActionsName, BaseAction }  from './base';\nimport { DomController } from '../dom';\nimport { Host } from '../host';\nexport class KeyupAction extends BaseAction implements PreoccupyAction {\n    static type: string = ActionsName.KEYUP;\n    static eventName: string = 'keyup';\n    constructor(public payload: {\n        which: number;\n    }) {\n        super();\n        this.type = KeyupAction.type;\n    }\n\n    performEvent(dom: DomController, stack: PreoccupyAction[]) {\n        // dom.k\n    }\n\n    static handleEvent(host: Host, event: KeyboardEvent): PreoccupyAction {\n        return new KeyupAction({\n            which: event.which\n        });\n    }\n}\n","import { MoveToAction } from \"./MoveToAction\";\nimport { ClickToAction } from \"./ClickToAction\";\nimport { KeypressAction } from \"./KeypressAction\";\nimport { ScrollByAction } from \"./ScrollByAction\";\nimport { DblClickToAction } from \"./DblClickToAction\";\nimport { KeydownAction } from './KeydownAction';\nimport { KeyupAction } from './KeyupAction';\n\nexport const actionMap = new Map<string, any>([\n    [MoveToAction.type, MoveToAction],\n    [ClickToAction.type, ClickToAction],\n    [KeydownAction.type, KeydownAction],\n    [KeypressAction.type, KeypressAction],\n    [KeyupAction.type, KeyupAction],\n    [MoveToAction.type, MoveToAction],\n    [ScrollByAction.type, ScrollByAction],\n    [DblClickToAction.type, DblClickToAction]\n]);\n","import { PreoccupyAction } from './../actions/base';\nexport enum TransportEvents {\n    connect,\n    disconnect,\n    action\n}\n\nexport type Listener = (event: TransportEvent) => void;\n\nexport interface TransportEvent {\n    type: TransportEvents;\n    detail: any;\n}\n\nexport interface AbstractTransport {\n    on(type: TransportEvents, callback: Listener): void;\n    publish(action: PreoccupyAction): void;\n}\n\nexport class Message {\n    public hash: string;\n\n    constructor(public type: string, public data: object, hash?: string) {\n        this.hash = hash || Math.random() * 10e6 + '';\n    }\n\n    public serialize(): string {\n        return JSON.stringify(this.data);\n    }\n\n    static parse(src: string): Message {\n        const [_prefix, type, hash, dataSrc] =  src.split('|');\n        return new Message(type, JSON.parse(dataSrc), hash);\n    }\n};","import { AbstractTransport, TransportEvents, TransportEvent, Listener, Message } from './abstract';\nimport { PreoccupyAction } from './../actions/base';\n\nexport class LocalTransport implements AbstractTransport {\n\n    private connected: boolean = false;\n    private listeners: { [prop: string]: Listener[] } = {};\n    private publishedMessages: Message[] = [];\n    private storage: Storage = localStorage;\n\n    constructor(private preifx: string = 'prefix', private stackSize: number = 10) {}\n\n    public handshake() {\n        if (this.connected) {\n            this.trigger(TransportEvents.connect);\n        } else {\n            this.connect();\n        }\n    }\n\n    public on(eventName: TransportEvents, callback: Listener): void {\n        if (!this.listeners[eventName]) {\n            this.listeners[eventName] = [];\n        }\n        this.listeners[eventName].push(callback);\n    };\n\n    public publish(action: PreoccupyAction): void {\n        const message = new Message('action', action);\n\n        this.publishedMessages.push(message);\n        this.storage.setItem(`${this.preifx}|${message.type}|${message.hash}`, message.serialize());\n\n        if (this.publishedMessages.length > this.stackSize) {\n            const messageToDelete = this.publishedMessages.shift();\n            if (messageToDelete != null) {\n                this.storage.removeItem(`${this.preifx}|${messageToDelete.type}|${messageToDelete.hash}`);\n            }\n        }\n    };\n\n    private connect() {\n        window.addEventListener('storage', (event) => this.onStorageMessage(event));\n        this.connected = true;\n        this.trigger(TransportEvents.connect);\n    }\n\n    private onStorageMessage({key, newValue}: StorageEvent) {\n        if (key && newValue && key.startsWith(this.preifx)) {\n            const message = Message.parse(key + '|' + newValue);\n\n            if (this.isExternalMessage(message)) {\n                this.trigger(TransportEvents.action, message);\n            }\n        }\n    }\n\n    private trigger(type: TransportEvents, detail?: any) {\n        if (Array.isArray(this.listeners[type])) {\n            this.listeners[type].forEach((callback) => callback({\n                type,\n                detail\n            }));\n        };\n    }\n\n    private isExternalMessage(message: Message): boolean {\n        return this.publishedMessages.find((ownMessage) => ownMessage.hash === message.hash) == null;\n    }\n}\n","import { actionMap } from './actions';\nimport { PreoccupyAction, RawPreoccupyAction } from './actions/base';\nimport { DomController } from './dom';\nimport { AbstractTransport, Message, TransportEvents } from './transports';\n\nconst STACK_LENGTH = 30;\n\nexport class Client {\n    private actionStack: PreoccupyAction[] = [];\n    private actions: Map<string, any> = actionMap;\n    constructor(\n        transport: AbstractTransport,\n        private dom: DomController\n    ) {\n        transport.on(TransportEvents.connect, (event) => {\n            this.dom.init();\n        });\n\n        transport.on(TransportEvents.action, (event) => {\n            const message: Message = event.detail;\n\n            this.perform(message.data as RawPreoccupyAction);\n        });\n    }\n\n    public perform(rawAction: RawPreoccupyAction) {\n        if (this.actions.has(rawAction.type)) {\n            const Action = this.actions.get(rawAction.type);\n            const action = new Action(rawAction.payload) as PreoccupyAction;\n\n            action.performEvent(this.dom, this.actionStack);\n            this.actionStack.push(action);\n            while (this.actionStack.length > STACK_LENGTH) {\n                this.actionStack.shift();\n            }\n        }\n    }\n\n}","import { Coordinates } from \"./host\";\n\nconst CURSOR = 1;\n\nexport class DomController {\n\n    private cursorEl: HTMLElement = document.createElement('div');\n\n    constructor(private el: Element) {}\n\n    public init() {\n        this.createCursorEl();\n        this.moveCursorTo({x: 0, y: 0});\n    }\n\n    public moveCursorTo(coordinates: Coordinates) {\n        const { x, y } = this.getAbsoluteCoordinates(coordinates);\n        this.cursorEl.style.top = `${y}px`;\n        this.cursorEl.style.left = `${x}px`;\n    }\n\n    public clickTo(coordinates: Coordinates) {\n        const absCoordinates = this.getAbsoluteCoordinates(coordinates);\n        const el = <HTMLElement>this.getElementFromPoint(absCoordinates);\n\n        switch (el.tagName.toLowerCase()) {\n            case 'textarea':\n            case 'input':\n                this.setFocus(<HTMLTextAreaElement>el);\n            default:\n                const options = {\n                    clientX: absCoordinates.x,\n                    clientY: absCoordinates.y,\n                    view: window\n                };\n                this.fireEvent('mousedown', el, options);\n                this.fireEvent('mouseup', el, options);\n                this.fireEvent('click', el, options);\n                break;\n        }\n\n    }\n\n    public dblClickTo(coordinates: Coordinates) {\n        const el = <HTMLElement>this.getElementFromPoint(this.getAbsoluteCoordinates(coordinates));\n        this.fireEvent('dblclick', el);\n    }\n\n    public keypress({which}: {which: number}) {\n        const el = document.activeElement;\n        if (el == null) {\n            return;\n        }\n\n        switch (el.tagName.toLowerCase()) {\n            case 'textarea':\n            case 'input':\n                this.fireEvent('keydown', <HTMLTextAreaElement>el);\n                this.fireEvent('keypress', <HTMLTextAreaElement>el);\n                (<HTMLTextAreaElement>el).value += String.fromCharCode(which);\n                this.fireEvent('input', <HTMLTextAreaElement>el);\n                this.fireEvent('keyup', <HTMLTextAreaElement>el);\n            default:\n                break;\n        }\n    }\n\n    public scroll({x, y, deltaX, deltaY}: {x: number, y: number, deltaX: number, deltaY: number}) {\n        let initialEl = <HTMLElement>this.getElementFromPoint(this.getAbsoluteCoordinates({x, y}));\n        let scrollableEl: HTMLElement | undefined;\n        let el = initialEl;\n\n        while(el.parentElement) {\n            if (this.isScrollable(el)) {\n                scrollableEl = el;\n                break;\n            }\n\n            el = el.parentElement;\n        }\n\n        if (scrollableEl) {\n            scrollableEl.scrollBy({\n                left: deltaX,\n                top: deltaY\n            });\n        }\n\n        this.fireEvent('wheel', el);\n        this.fireEvent('scroll', el);\n    }\n\n    private getAbsoluteCoordinates({x, y}: Coordinates): Coordinates {\n        const { clientHeight, clientWidth } = this.el as HTMLBodyElement;\n\n        return {\n            x: x * clientWidth,\n            y: y * clientHeight\n        };\n    }\n\n    private css(el: HTMLElement, styles: Partial<CSSStyleDeclaration>) {\n        for (const [prop, value] of Object.entries(styles)) {\n            el.style.setProperty(prop, value);\n        }\n    }\n\n    private getElementFromPoint({x, y}: Coordinates) {\n        return document.elementFromPoint(x - CURSOR, y - CURSOR);\n    }\n\n    private setFocus(el: HTMLTextAreaElement | HTMLInputElement) {\n        el.focus();\n        el.select();\n    }\n\n    private fireEvent(type: string, el: HTMLElement, options: object = {}): boolean {\n        let event: Event;\n\n        switch (type) {\n            case 'click':\n            case 'dblclick':\n            case 'mousedown':\n            case 'mouseup':\n                event = new MouseEvent(type, {\n                    bubbles: true,\n                    cancelable: true,\n                    ...options\n                });\n                break;\n            default:\n                event = new Event(type, {\n                    bubbles: true,\n                    cancelable: true\n                });\n                break;\n        }\n\n        console.log('emited', event);\n        return el.dispatchEvent(event);\n    }\n\n    private isScrollable(el: HTMLElement) {\n        return el.scrollWidth > el.clientWidth || el.scrollHeight > el.clientHeight;\n    }\n\n    private createCursorEl() {\n        this.css(this.cursorEl, <Partial<CSSStyleDeclaration>>{\n            'z-index': '100500',\n            'position': 'absolute',\n            'width': '30px',\n            'height': '30px',\n            'display': 'inline-block',\n            'background': `url('data:image/png;base64,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')`,\n        });\n\n        const bodyEl = this.el.querySelector('body');\n        if (bodyEl) {\n            bodyEl.appendChild(this.cursorEl);\n        } else {\n            this.el.appendChild(this.cursorEl);\n        }\n    }\n\n}","import { AbstractTransport, TransportEvents } from './transports';\nimport { DblClickToAction } from \"./actions/DblClickToAction\";\nimport { ScrollByAction } from \"./actions/ScrollByAction\";\nimport { KeypressAction } from \"./actions/KeypressAction\";\nimport { ClickToAction } from \"./actions/ClickToAction\";\nimport { MoveToAction } from \"./actions/MoveToAction\";\nimport { actionMap } from './actions';\nimport { PreoccupyAction } from './actions/base';\n\nexport interface Coordinates {\n    x: number;\n    y: number;\n}\n\nexport class Host {\n    private actions: Map<string, any> = actionMap;\n    constructor(private transport: AbstractTransport, private el: HTMLElement) {\n        transport.on(TransportEvents.connect, (event) => {\n            console.log('HOST', event);\n            this.initEvents();\n        });\n    }\n\n    private initEvents() {\n        this.actions.forEach((Action) => {\n            this.el.addEventListener(Action.eventName, (event: Event) => {\n                const action = Action.handleEvent(this, event);\n                this.transport.publish(action);\n            });\n        });\n    }\n\n    public getRelativeCoordinate(event: MouseEvent): {x: number, y: number} {\n        const { offsetX, offsetY } = event;\n        const { clientHeight, clientWidth } = <HTMLDivElement>event.target;\n\n        return {\n            x: offsetX / clientWidth,\n            y: offsetY / clientHeight\n        };\n    }\n}\n","import { Client } from './client';\nimport { LocalTransport } from './transports/local';\nimport { DomController } from './dom';\nimport { Host } from './host';\n\nexport * from './client';\nexport * from './host';\n\nconst transport = new LocalTransport();\n\nexport function start(el: HTMLElement): Client {\n  const client = new Client(transport, new DomController(el));\n  transport.handshake();\n  return client;\n\n}\n\nexport function connect(el: HTMLElement): Host {\n  const host = new Host(transport, el);\n  transport.handshake();\n  return host;\n}"],"names":["tslib_1.__extends"],"mappings":"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"}